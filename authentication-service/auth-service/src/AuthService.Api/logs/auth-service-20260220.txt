[2026-02-20 00:00:10 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 00:00:11 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "ICE"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Users\corre\OneDrive\Escritorio\resCAP\IN6AV\IN6AV\Restaurante_ICE\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 147
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "ICE"
    File: auth.c
    Line: 339
    Routine: auth_failed
[2026-02-20 00:29:39 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 00:29:40 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 00:29:41 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 00:29:41 ERR] An exception occurred while trying to decrypt the element. {"EventId":{"Id":43,"Name":"ExceptionOccurredTryingToDecryptElement"},"SourceContext":"Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
[2026-02-20 00:29:41 ERR] An exception occurred while processing the key element '<key id="aaec4a9e-4403-4eaa-94ec-336f8802a82b" version="1" />'. {"EventId":{"Id":24,"Name":"ExceptionOccurredWhileProcessingTheKeyElement"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
[2026-02-20 00:29:41 WRN] Key {aaec4a9e-4403-4eaa-94ec-336f8802a82b} is ineligible to be the default key because its CreateEncryptor method failed. {"EventId":{"Id":12,"Name":"KeyIsIneligibleToBeTheDefaultKeyBecauseItsMethodFailed"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngGcmAuthenticatedEncryptorFactory.CreateEncryptorInstance(IKey key)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyBase.CreateEncryptor()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver.CanCreateAuthenticatedEncryptor(IKey key)
[2026-02-20 00:29:41 ERR] An exception occurred while trying to decrypt the element. {"EventId":{"Id":43,"Name":"ExceptionOccurredTryingToDecryptElement"},"SourceContext":"Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
[2026-02-20 00:29:41 ERR] An exception occurred while processing the key element '<key id="6e0ef8bc-c762-4f73-90c3-86875478fddd" version="1" />'. {"EventId":{"Id":24,"Name":"ExceptionOccurredWhileProcessingTheKeyElement"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
[2026-02-20 00:29:41 WRN] Key {6e0ef8bc-c762-4f73-90c3-86875478fddd} is ineligible to be the default key because its CreateEncryptor method failed. {"EventId":{"Id":12,"Name":"KeyIsIneligibleToBeTheDefaultKeyBecauseItsMethodFailed"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngGcmAuthenticatedEncryptorFactory.CreateEncryptorInstance(IKey key)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyBase.CreateEncryptor()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver.CanCreateAuthenticatedEncryptor(IKey key)
[2026-02-20 00:29:41 WRN] Key {6e0ef8bc-c762-4f73-90c3-86875478fddd} is ineligible to be the default key because its CreateEncryptor method failed. {"EventId":{"Id":12,"Name":"KeyIsIneligibleToBeTheDefaultKeyBecauseItsMethodFailed"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.Lazy`1.CreateValue()
   at Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngGcmAuthenticatedEncryptorFactory.CreateEncryptorInstance(IKey key)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyBase.CreateEncryptor()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver.CanCreateAuthenticatedEncryptor(IKey key)
[2026-02-20 00:29:41 WRN] Key {aaec4a9e-4403-4eaa-94ec-336f8802a82b} is ineligible to be the default key because its CreateEncryptor method failed. {"EventId":{"Id":12,"Name":"KeyIsIneligibleToBeTheDefaultKeyBecauseItsMethodFailed"},"SourceContext":"Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver"}
System.Security.Cryptography.CryptographicException: Error occurred during a cryptographic operation.
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapiCore(Byte* pbProtectedData, UInt32 cbProtectedData, Byte* pbOptionalEntropy, UInt32 cbOptionalEntropy)
   at Microsoft.AspNetCore.DataProtection.Cng.DpapiSecretSerializerHelper.UnprotectWithDpapi(Byte[] protectedSecret)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor.Decrypt(XElement encryptedElement)
   at Microsoft.AspNetCore.DataProtection.XmlEncryption.XmlEncryptionExtensions.DecryptElement(XElement element, IActivator activator)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager.Microsoft.AspNetCore.DataProtection.KeyManagement.Internal.IInternalXmlKeyManager.DeserializeDescriptorFromKeyElement(XElement keyElement)
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
--- End of stack trace from previous location ---
   at System.Lazy`1.CreateValue()
   at Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.CngGcmAuthenticatedEncryptorFactory.CreateEncryptorInstance(IKey key)
   at Microsoft.AspNetCore.DataProtection.KeyManagement.KeyBase.CreateEncryptor()
   at Microsoft.AspNetCore.DataProtection.KeyManagement.DefaultKeyResolver.CanCreateAuthenticatedEncryptor(IKey key)
[2026-02-20 00:29:41 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 00:39:18 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 00:39:18 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 00:39:19 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 00:39:19 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 00:40:46 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJG9BT5L37Q:00000001","RequestPath":"/health","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:40:46 INF] HTTP GET /health responded 200 in 181.9447 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37Q:00000001","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:40:46 INF] HTTP GET /health responded 200 in 3.0949 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37R:00000001","ConnectionId":"0HNJG9BT5L37R"}
[2026-02-20 00:40:46 INF] HTTP GET /health responded 200 in 2.8894 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37Q:00000002","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:40:46 INF] HTTP GET /favicon.ico responded 404 in 0.2981 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37Q:00000003","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:40:46 INF] HTTP GET /favicon.ico responded 404 in 0.1668 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37Q:00000004","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:40:46 INF] HTTP GET /favicon.ico responded 404 in 0.1747 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37Q:00000005","ConnectionId":"0HNJG9BT5L37Q"}
[2026-02-20 00:41:05 INF] HTTP GET /health responded 200 in 0.4702 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L37U:00000001","ConnectionId":"0HNJG9BT5L37U"}
[2026-02-20 00:44:55 INF] HTTP POST /api/restaurants responded 404 in 0.1296 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9BT5L380:00000001","ConnectionId":"0HNJG9BT5L380"}
[2026-02-20 00:55:09 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 00:55:10 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 00:55:10 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 00:55:10 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 00:56:13 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJG9KHG1DBK:00000001","RequestPath":"/RestauranteICE/v1/restaurants/","ConnectionId":"0HNJG9KHG1DBK"}
[2026-02-20 00:56:13 INF] HTTP POST /RestauranteICE/v1/restaurants/ responded 404 in 38.8723 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9KHG1DBK:00000001","ConnectionId":"0HNJG9KHG1DBK"}
[2026-02-20 00:57:07 INF] HTTP GET /health responded 200 in 114.6894 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9KHG1DBK:00000002","ConnectionId":"0HNJG9KHG1DBK"}
[2026-02-20 01:02:12 INF] HTTP POST /RestauranteICE/v1/restaurant responded 404 in 3.4555 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9KHG1DBM:00000001","ConnectionId":"0HNJG9KHG1DBM"}
[2026-02-20 01:04:20 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:04:21 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 01:04:21 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 01:04:21 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 01:08:24 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJG9RBBOBB1:00000001","RequestPath":"/RestauranteICE/v1/restaurant","ConnectionId":"0HNJG9RBBOBB1"}
[2026-02-20 01:08:24 INF] HTTP POST /RestauranteICE/v1/restaurant responded 404 in 54.2159 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9RBBOBB1:00000001","ConnectionId":"0HNJG9RBBOBB1"}
[2026-02-20 01:11:35 INF] HTTP POST /RestauranteICE/v1/restaurant responded 404 in 1.4592 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJG9RBBOBB3:00000001","ConnectionId":"0HNJG9RBBOBB3"}
[2026-02-20 01:15:33 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:15:34 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 01:15:34 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 01:15:34 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 01:17:31 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:17:32 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 01:17:32 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 01:17:32 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 01:20:32 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:20:33 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.PostgresException (0x80004005): 28P01: la autentificaci�n password fall� para el usuario �ICE�
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Users\corre\OneDrive\Escritorio\resCAP\IN6AV\IN6AV\Restaurante_ICE\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 147
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: la autentificaci�n password fall� para el usuario �ICE�
    File: auth.c
    Line: 320
    Routine: auth_failed
[2026-02-20 01:20:51 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:20:52 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.PostgresException (0x80004005): 28P01: la autentificaci�n password fall� para el usuario �ICE�
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Users\corre\OneDrive\Escritorio\resCAP\IN6AV\IN6AV\Restaurante_ICE\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 147
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: la autentificaci�n password fall� para el usuario �ICE�
    File: auth.c
    Line: 320
    Routine: auth_failed
[2026-02-20 01:22:50 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:22:51 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 01:22:51 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 01:22:52 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
[2026-02-20 01:29:46 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJGA79BQFEV:00000001","RequestPath":"/RestauranteICE/v1/restaurant","ConnectionId":"0HNJGA79BQFEV"}
[2026-02-20 01:29:46 INF] HTTP POST /RestauranteICE/v1/restaurant responded 404 in 44.8962 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGA79BQFEV:00000001","ConnectionId":"0HNJGA79BQFEV"}
[2026-02-20 01:30:10 INF] HTTP POST /RestauranteICE/v1/restaurant responded 404 in 1.2424 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGA79BQFEV:00000002","ConnectionId":"0HNJGA79BQFEV"}
[2026-02-20 01:40:55 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 01:40:56 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 01:40:57 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 01:40:57 INF] API de AuthService está ejecutándose en http://localhost:5227. Endpoint de salud: http://localhost:5227/health {"SourceContext":"Program"}
